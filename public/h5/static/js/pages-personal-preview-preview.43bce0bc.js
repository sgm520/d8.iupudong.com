(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-personal-preview-preview"],{"09f0":function(t,e,r){"use strict";function n(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(r.push(o.value),e&&r.length===e)break}catch(u){i=!0,a=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw a}}return r}}r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"0d21":function(t,e,r){"use strict";function n(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"103a":function(t,e,r){"use strict";var n=r("4ea4");r("c975"),r("baa5"),r("acd8"),r("ac1f"),r("466d"),r("1276"),r("2ca0"),r("498a"),Object.defineProperty(e,"__esModule",{value:!0}),e.GD=void 0;var i=n(r("b85c")),a={isGradient:function(t){return!(!t||!t.startsWith("linear")&&!t.startsWith("radial"))},doGradient:function(t,e,r,n){t.startsWith("linear")?d(e,r,t,n):t.startsWith("radial")&&s(e,r,t,n)}};function o(t){var e,r=t.substring(0,t.length-1).split("%,"),n=[],a=[],o=(0,i.default)(r);try{for(o.s();!(e=o.n()).done;){var s=e.value;n.push(s.substring(0,s.lastIndexOf(" ")).trim()),a.push(s.substring(s.lastIndexOf(" "),s.length)/100)}}catch(u){o.e(u)}finally{o.f()}return{colors:n,percents:a}}function s(t,e,r,n){for(var i=o(r.match(/radial-gradient\((.+)\)/)[1]),a=n.createCircularGradient(0,0,t<e?e/2:t/2),s=0;s<i.colors.length;s++)a.addColorStop(i.percents[s],i.colors[s]);n.setFillStyle(a)}function u(t,e,r){var n,i=t.match(/([-]?\d{1,3})deg/),a=i&&i[1]?parseFloat(i[1]):0;switch(a){case 0:n=[0,-r/2,0,r/2];break;case 90:n=[e/2,0,-e/2,0];break;case-90:n=[-e/2,0,e/2,0];break;case 180:n=[0,r/2,0,-r/2];break;case-180:n=[0,-r/2,0,r/2];break;default:var o=0,s=0,u=0,d=0;i[1]>0&&i[1]<90?(o=e/2-(e/2*Math.tan((90-i[1])*Math.PI*2/360)-r/2)*Math.sin(2*(90-i[1])*Math.PI*2/360)/2,d=Math.tan((90-i[1])*Math.PI*2/360)*o,u=-o,s=-d):i[1]>-180&&i[1]<-90?(o=-e/2+(e/2*Math.tan((90-i[1])*Math.PI*2/360)-r/2)*Math.sin(2*(90-i[1])*Math.PI*2/360)/2,d=Math.tan((90-i[1])*Math.PI*2/360)*o,u=-o,s=-d):i[1]>90&&i[1]<180?(o=e/2+(-e/2*Math.tan((90-i[1])*Math.PI*2/360)-r/2)*Math.sin(2*(90-i[1])*Math.PI*2/360)/2,d=Math.tan((90-i[1])*Math.PI*2/360)*o,u=-o,s=-d):(o=-e/2-(-e/2*Math.tan((90-i[1])*Math.PI*2/360)-r/2)*Math.sin(2*(90-i[1])*Math.PI*2/360)/2,d=Math.tan((90-i[1])*Math.PI*2/360)*o,u=-o,s=-d),n=[o,s,u,d];break}return n}function d(t,e,r,n){for(var i=u(r,t,e),a=n.createLinearGradient(i[0],i[1],i[2],i[3]),s=r.match(/linear-gradient\((.+)\)/)[1],d=o(s.substring(s.indexOf(",")+1)),c=0;c<d.colors.length;c++)a.addColorStop(d.percents[c],d.colors[c]);n.setFillStyle(a)}e.GD=a},2739:function(t,e,r){"use strict";(function(t){var n=r("4ea4");r("cb29"),r("4de4"),r("caad"),r("c975"),r("a15b"),r("d81d"),r("13d5"),r("b64b"),r("d3b7"),r("07ac"),r("ac1f"),r("2532"),r("5319"),r("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.Draw=void 0;var i=n(r("b85c"));r("96cf");var a=n(r("1da1")),o=n(r("ade3")),s=n(r("3835")),u=n(r("d4ec")),d=n(r("bee2")),c=r("533a"),l=r("103a"),f=n(r("da57")),h=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;(0,u.default)(this,e),this.ctx=t,this.canvas=r||null,this.use2dCanvas=n,this.isH5PathToBase64=i,this.sleep=a,this.count=0,this.progress=0}return(0,d.default)(e,[{key:"roundRect",value:function(t,e,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!(i<0)){var s=this.ctx;if(s.beginPath(),i){var u=i||{},d=u.borderTopLeftRadius,c=void 0===d?i||0:d,l=u.borderTopRightRadius,f=void 0===l?i||0:l,h=u.borderBottomRightRadius,v=void 0===h?i||0:h,p=u.borderBottomLeftRadius,g=void 0===p?i||0:p;s.arc(t+r-v,e+n-v,v,0,.5*Math.PI),s.lineTo(t+g,e+n),s.arc(t+g,e+n-g,g,.5*Math.PI,Math.PI),s.lineTo(t,e+c),s.arc(t+c,e+c,c,Math.PI,1.5*Math.PI),s.lineTo(t+r-f,e),s.arc(t+r-f,e+f,f,1.5*Math.PI,2*Math.PI),s.lineTo(t+r,e+n-v)}else s.rect(t,e,r,n);s.closePath(),o&&s.stroke(),a&&s.fill()}}},{key:"setTransform",value:function(t,e){var r=e.transform,n=e.transformOrigin,i=void 0===n?"center center":n,a=this.ctx,o=r||{},s=o.scaleX,u=void 0===s?1:s,d=o.scaleY,l=void 0===d?1:d,f=o.translateX,h=void 0===f?0:f,v=o.translateY,p=void 0===v?0:v,g=o.rotate,b=void 0===g?0:g,m=o.skewX,w=void 0===m?0:m,x=o.skewY,y=void 0===x?0:x,k=t.left,P=t.top,S=t.width,R=t.height;h=(0,c.toPx)(h,S)||0,p=(0,c.toPx)(p,R)||0;var T={top:(0,c.toPx)("0%",1),center:(0,c.toPx)("50%",1,!0),bottom:(0,c.toPx)("100%",1)},I={left:(0,c.toPx)("0%",1),center:(0,c.toPx)("50%",1,!0),right:(0,c.toPx)("100%",1)};i=i.split(" ").filter((function(t,e){return e<2})).reduce((function(t,e){if(/\d+/.test(e)){var r=(0,c.toPx)(e,1,!0)/(/px|rpx$/.test(e)?(0,c.isNumber)(t.x)?R:S:1);return(0,c.isNumber)(t.x)?Object.assign(t,{y:r}):Object.assign(t,{x:r})}return(0,c.isNumber)(I[e])&&!(0,c.isNumber)(t.x)?Object.assign(t,{x:I[e]}):Object.assign(t,{y:T[e]||.5})}),{}),a.scale(u,l);var M={x:S*(u>0?1:-1)*i.x+(k+h)/u,y:R*(l>0?1:-1)*i.y+(P+p)/l};return a.translate(M.x,M.y),b&&a.rotate(b*Math.PI/180),(w||y)&&a.transform(1,Math.tan(y*Math.PI/180),Math.tan(w*Math.PI/180),1,0,0),{x:-S*i.x,y:-R*i.y,w:S,h:R}}},{key:"setBackground",value:function(t,e,r){var n=this.ctx;t?l.GD.isGradient(t)?l.GD.doGradient(t,e,r,n):n.setFillStyle(t):n.setFillStyle("transparent")}},{key:"setShadow",value:function(t){var e=t.boxShadow,r=void 0===e?[]:e,n=this.ctx;if(r.length){var i=(0,s.default)(r,4),a=i[0],o=i[1],u=i[2],d=i[3];n.setShadow(a,o,u,d)}}},{key:"setBorder",value:function(t,e){var r,n=this.ctx,i=t.width,a=t.height,s=e.border,u=e.borderBottom,d=e.borderTop,c=e.borderRight,l=e.borderLeft,f=e.borderRadius,h=s||{},v=h.borderWidth,p=void 0===v?0:v,g=h.borderStyle,b=h.borderColor,m=u||{},w=m.borderBottomWidth,x=void 0===w?p:w,y=m.borderBottomStyle,k=void 0===y?g:y,P=m.borderBottomColor,S=void 0===P?b:P,R=d||{},T=R.borderTopWidth,I=void 0===T?p:T,M=R.borderTopStyle,O=void 0===M?g:M,B=R.borderTopColor,C=void 0===B?b:B,j=c||{},L=(j.borderRightWidth,j.borderRightStyle,j.borderRightColor,l||{}),N=L.borderLeftWidth,F=void 0===N?p:N,_=L.borderLeftStyle,$=void 0===_?g:_,A=L.borderLeftColor,W=void 0===A?b:A,D=f||(r={r:f},(0,o.default)(r,"r",f),(0,o.default)(r,"r",f),(0,o.default)(r,"r",f),r),H=D.borderTopLeftRadius,z=void 0===H?f||0:H,E=D.borderTopRightRadius,U=void 0===E?f||0:E,J=D.borderBottomRightRadius,G=void 0===J?f||0:J,X=D.borderBottomLeftRadius,q=void 0===X?f||0:X;if(u||l||d||c||s){var Y=function(t,e,r){"dashed"==e?n.setLineDash([Math.ceil(6*t),Math.ceil(6*t)]):"dotted"==e&&n.setLineDash([t,t]),n.setStrokeStyle(r)},Q=function(t,e,r,i,a,o,s,u,d,c,l,f,h,v){n.save(),n.setLineWidth(f),Y(f,h,v),n.beginPath(),n.arc(t,e,s,Math.PI*d,Math.PI*c),n.lineTo(r,i),n.arc(a,o,u,Math.PI*c,Math.PI*l),n.stroke(),n.restore()};n.save(),this.setOpacity(e);var V=this.setTransform(t,e),Z=V.x,K=V.y;s&&(n.setLineWidth(p),Y(p,g,b),this.roundRect(Z,K,i,a,f,!1,!!b),n.restore()),u&&Q(Z+i-G,K+a-G,Z+q,K+a,Z+q,K+a-q,G,q,.25,.5,.75,x,k,S),l&&Q(Z+q,K+a-q,Z,K+z,Z+z,K+z,q,z,.75,1,1.25,F,$,W),d&&Q(Z+z,K+z,Z+i-U,K,Z+i-U,K+U,z,U,1.25,1.5,1.75,I,O,C),c&&Q(Z+i-U,K+U,Z+i,K+a-G,Z+i-G,K+a-G,U,G,1.75,2,.25,I,O,C)}}},{key:"setOpacity",value:function(t){var e=t.opacity,r=void 0===e?1:e;this.ctx.setGlobalAlpha(r)}},{key:"drawView",value:function(t,e){var r=this.ctx,n=t.width,i=t.height,a=e||{},o=a.borderRadius,s=void 0===o?0:o,u=a.backgroundColor;r.save(),this.setOpacity(e);var d=this.setTransform(t,e),c=d.x,l=d.y;this.setShadow(e),this.setBackground(u,n,i),this.roundRect(c,l,n,i,s,!0,!1),r.restore(),this.setBorder(t,e)}},{key:"drawImage",value:function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n,i,o,s=this,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},i=u.length>2&&void 0!==u[2]?u[2]:{},o=!(u.length>3&&void 0!==u[3])||u[3],e.next=5,new Promise(function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(u,d){var l,f,h,v,p,g,b,m,w,x,y,k,P,S,R,T,I,M,O,B,C,j,L,N,F,_,$,A,W,D,H,z,E,U,J;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=s.ctx,f=s.sleep,h=s.canvas,v=i.borderRadius,p=void 0===v?0:v,g=i.mode,b=i.padding,m=void 0===b?{}:b,w=i.backgroundColor,x=m.paddingTop,y=void 0===x?0:x,k=m.paddingLeft,P=void 0===k?0:k,S=m.paddingRight,R=void 0===S?0:S,T=m.paddingBottom,I=void 0===T?0:T,M=n.left,O=n.top,B=n.width,C=n.height,l.save(),o||(s.setOpacity(i),j=s.setTransform(n,i),L=j.x,N=j.y,w&&s.setBackground(w,B,C),M=L,O=N,s.setShadow(i),s.roundRect(M,O,B,C,p,!!p,!1)),l.clip(),F=function(t){M+=P,O+=y,B=B-P-R,C=C-y-I;var e=t.width,r=t.height,n=t.src,i=0,a=0,o=B/C,s=e/r;switch(e||(g="scaleToFill"),g){case"aspectFit":o>=s?(e=C*s,r=C,i=M+Math.round(B-e)/2,a=O):(e=B,r=B/s,i=M,a=O+Math.round(C-r)/2),l.drawImage(n,i,a,e,r);break;case"aspectFill":o>=s?r=e/o:(e=r*o,i=Math.round(((t.width||B)-e)/2)),l.drawImage(n,i,a,e,r,M,O,B,C);break;default:l.drawImage(n,M,O,B,C)}},_=function(){l.restore(),s.setBorder(n,i),setTimeout(u,f)},$=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s.use2dCanvas){var n=h.createImage();n.onload=function(){e.src=n,F(e),_()},n.onerror=(0,a.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r&&t.error("createImage fail: ".concat(JSON.stringify(e))),u(!0);case 2:case"end":return n.stop()}}),n)}))),n.src=e.src}else F(e),_()},"string"!==typeof r){e.next=21;break}return e.next=14,(0,c.getImageInfo)(r,s.isH5PathToBase64);case 14:A=e.sent,W=A.path,D=A.width,H=A.height,$({src:W,width:D,height:H}),e.next=34;break;case 21:e.prev=21,$(r),e.next=34;break;case 25:return e.prev=25,e.t0=e["catch"](21),e.next=29,(0,c.getImageInfo)(r.originSrc,s.isH5PathToBase64,!0);case 29:z=e.sent,E=z.path,U=z.width,J=z.height,$({src:E,width:U,height:J},!0);case 34:case"end":return e.stop()}}),e,null,[[21,25]])})));return function(t,r){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()},{key:"drawText",value:function(t,e,r,n){var i=this.ctx,a=e.width,o=e.height,s=e.offsetLeft,u=void 0===s?0:s,d=e.offsetTop,l=void 0===d?0:d,f=r.color,h=void 0===f?"#000000":f,v=r.lineHeight,p=void 0===v?"1.4em":v,g=r.fontSize,b=void 0===g?14:g,m=r.fontWeight,w=r.fontFamily,x=r.textStyle,y=r.textAlign,k=void 0===y?"left":y,P=(r.verticalAlign,r.backgroundColor),S=r.maxLines,R=(r.display,r.padding,r.borderRadius),T=void 0===R?0:R,I=r.textDecoration;if(p=(0,c.toPx)(p,b),t){i.save(),this.setOpacity(r);var M=this.setTransform(e,r),O=M.x,B=M.y;i.setFonts({fontFamily:w,fontSize:b,fontWeight:m,textStyle:x}),i.setTextBaseline("middle"),i.setTextAlign(k),i.translate(0,-b/2),B+=b,P&&(this.setBackground(P,a,o),this.roundRect(O,B-b/2,a,o,T,1,0)),B+=l,this.setShadow(r),i.setFillStyle(h);var C={};if(n&&n.word.length>0)for(var j=0;j<n.word.length;j++){var L=0,N=void 0;while((N=t.indexOf(n.word[j],L))>-1){C[N]={reset:!0};for(var F=0;F<n.word[j].length;F++)C[N+F]={reset:!0};L=N+1}}switch(k){case"left":break;case"center":O+=.5*a;break;case"right":O+=a;break;default:break}var _=i.measureText(t).width,$=(Math.ceil(_/a),Math.ceil((p-b)/2)),A=function(t,e,r){var n=t;switch(k){case"left":t=t,n+=r;break;case"center":t-=r/2,n=t+r;break;case"right":n=t,t-=r;break;default:break}I&&(i.setLineWidth(b/13),i.beginPath(),e-=$,/\bunderline\b/.test(I)&&(i.moveTo(t,e-.5*b),i.lineTo(n,e-.5*b)),/\boverline\b/.test(I)&&(i.moveTo(t,e-1.5*b),i.lineTo(n,e-1.5*b)),/\bline-through\b/.test(I)&&(i.moveTo(t,e-b),i.lineTo(n,e-b)),i.closePath(),i.setStrokeStyle(h),i.stroke())},W=function(t,e,r){for(var a=Object.keys(C),o=0;o<a.length;o++){var s=C[a[o]];i.save(),i.setFillStyle(n.color),s.char&&i.fillText(s.char,s.x,s.y),i.restore()}},D=function(t,e){if(t){var r=Math.round(i.measureText(" ").width),n=Math.round(i.measureText("　").width),a=Math.round(i.measureText(e).width),o="",s=1;return a==n?(o="　",s=1):(o=" ",s=Math.ceil(a/r)),{char:new Array(s).fill(o).join(""),width:a}}return{char:e}},H=function(t,e,r,n){C[e].x=r,C[e].y=n,C[e].char=t},z=function(t,e,r,n,a){var o=a.startIndex,s=void 0===o?0:o,u=(a.endIndex,r);/·/.test(r)&&(u=u.replace(/·/g,"."),n=i.measureText(u).width);for(var d=r.split(""),c=t,l=0;l<e.length;l++){var f=e[l],h=f-s,v=d[h];if(v){var p=D(C[f],v),g=p.char,b=p.width;d[h]=g,"center"==k&&(c=t-.5*(n-b)),"right"==k&&(c=t-n+b),H(v,f,c+i.measureText(u.substring(0,h)).width,B+$)}}return d};if(_+u<=a&&!t.includes("\n")){O+=u;var E=Object.keys(C),U="";return E&&(U=z(O,E,t,_,{}),W()),i.fillText(U.join(""),O,B+$),B+=p,A(O,B,_),i.restore(),void this.setBorder(e,r)}for(var J=t.split(""),G=B,X=O,q="",Y=0,Q=0,V=0;V<=J.length;V++){var Z=J[V]||"",K="\n"===Z,tt=""==Z;Z=K?"":Z;var et=q+Z,rt=i.measureText(et).width;if(Y>=S)break;if(0==Y?(rt+=u,X=O+u):(rt=rt,X=O),rt>a||K||tt){var nt=V;if(Y++,q=tt&&rt<=a?et:q,Y===S&&rt>a){while(i.measureText("".concat(q,"...")).width>a){if(q.length<=1)break;q=q.substring(0,q.length-1)}q+="..."}var it=Object.keys(C),at="";if(it&&(at=z(O,it,q,rt,{startIndex:Q,endIndex:nt}),W()),i.fillText(at.join(""),X,B+$),B+=p,A(X,B,rt),q=Z,Q=nt+(K?1:0),B+p>G+o)break}else q=et}i.restore(),this.setBorder(e,r)}}},{key:"drawNode",value:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var r,n,a,o,s,u,d,c,l,h,v,p,g,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.layoutBox,n=e.computedStyle,a=e.attributes,o=e.name,s=e.rules,u=e.children,d=e.parent,d.hasOwnProperty("id")||(this.count=Math.max(e.count||1,this.count)),c=e.attributes,l=c.src,h=c.text,"view"!==o){t.next=7;break}this.drawView(r,n),t.next=13;break;case 7:if("image"!==o||!l){t.next=12;break}return t.next=10,this.drawImage(a,r,n,!1);case 10:t.next=13;break;case 12:"text"===o?this.drawText(h,r,n,s):"qrcode"===o&&(null===f.default||void 0===f.default?void 0:f.default.api)&&f.default.api.draw(h,this,r,n);case 13:if(this.progress=(this.progress||0)+1,u){t.next=16;break}return t.abrupt("return");case 16:v=Object.values?Object.values(u):Object.keys(u).map((function(t){return u[t]})),p=(0,i.default)(v),t.prev=18,p.s();case 20:if((g=p.n()).done){t.next=26;break}return b=g.value,t.next=24,this.drawNode(b);case 24:t.next=20;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](18),p.e(t.t0);case 31:return t.prev=31,p.f(),t.finish(31);case 34:case"end":return t.stop()}}),t,this,[[18,28,31,34]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"listen",value:function(t,e){var r=this;"progressChange"==t&&Object.defineProperty(this,"progress",{configurable:!0,set:function(t){r._progress=t,e(t/r.count)},get:function(){return r._progress}})}}]),e}();e.Draw=h}).call(this,r("5a52")["default"])},"309a":function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("v-uni-view",{staticClass:"wechat"},[r("l-painter",{attrs:{board:t.base,isRenderImage:!0},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.getImg.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"btns"},[r("v-uni-view",{staticClass:"save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveImg.apply(void 0,arguments)}}},[t._v("保存图片")]),r("v-uni-view",{staticClass:"copy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyLink.apply(void 0,arguments)}}},[t._v("复制推广链接")])],1)],1)],1)},a=[]},3835:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=s(r("0d21")),i=s(r("09f0")),a=s(r("06c5")),o=s(r("3d8c"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return(0,n.default)(t)||(0,i.default)(t,e)||(0,a.default)(t,e)||(0,o.default)()}},"3d01":function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/**\r\n * 全局引入uview样式\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.poster[data-v-4d2ecf84]{position:fixed;left:0;top:0;right:0;bottom:0}.poster .poster-img[data-v-4d2ecf84]{width:100%;height:100%}.wechat[data-v-4d2ecf84]{position:fixed;left:0;top:0;right:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff}.wechat .wechat-poster-img[data-v-4d2ecf84]{width:300px;height:450px;background-color:red}.wechat .btns[data-v-4d2ecf84]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?20?% 0;width:300px}.wechat .btns .save[data-v-4d2ecf84],\r\n.wechat .btns .copy[data-v-4d2ecf84]{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;max-width:48%;padding:%?20?% 0;border-radius:%?8?%;text-align:center}.wechat .btns .save[data-v-4d2ecf84]{border:1px solid #f8d85f;background-color:#f8d85f;color:#fff}.wechat .btns .copy[data-v-4d2ecf84]{border:1px solid #f8d85f;color:#f8d85f;background-color:#fff}',""]),t.exports=e},"3d8c":function(t,e,r){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"3da8":function(t,e,r){"use strict";var n=r("de5c"),i=r.n(n);i.a},"408a":function(t,e,r){var n=r("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"43d7":function(t,e,r){"use strict";r("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.expand=i,e.adaptor=a;var n=function(t){return{setFonts:function(e){var r=e.fontFamily,n=void 0===r?"sans-serif":r,i=e.fontSize,a=void 0===i?14:i,o=e.fontWeight,s=void 0===o?"normal":o,u=e.textStyle,d=void 0===u?"normal":u;t.font="".concat(d," ").concat(s," ").concat(a,"px ").concat(n)}}};function i(t){return Object.assign(t,n(t))}function a(t){return Object.assign(t,n(t),{setStrokeStyle:function(e){t.strokeStyle=e},setLineWidth:function(e){t.lineWidth=e},setLineCap:function(e){t.lineCap=e},setFillStyle:function(e){t.fillStyle=e},setFontSize:function(e){t.font=String(e)},setGlobalAlpha:function(e){t.globalAlpha=e},setLineJoin:function(e){t.lineJoin=e},setTextAlign:function(e){t.textAlign=e},setMiterLimit:function(e){t.miterLimit=e},setShadow:function(e,r,n,i){t.shadowOffsetX=e,t.shadowOffsetY=r,t.shadowBlur=n,t.shadowColor=i},setTextBaseline:function(e){t.textBaseline=e},createCircularGradient:function(){},draw:function(){}})}},"533a":function(t,e,r){"use strict";(function(t){var n=r("4ea4");r("99af"),r("c975"),r("c19f"),r("ace4"),r("b680"),r("d3b7"),r("acd8"),r("e25e"),r("ac1f"),r("3ca3"),r("5319"),r("1276"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("ddb0"),r("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.sleep=s,e.isNumber=d,e.toPx=c,e.compareVersion=l,e.base64ToPath=f,e.pathToBase64=h,e.getImageInfo=v,r("96cf");var i=n(r("1da1")),a=n(r("3835")),o=/^(http|\/\/)/;function s(t){return new Promise((function(e){return setTimeout(e,t)}))}var u={};function d(t){return/^-?\d+(\.\d+)?$/.test(t)}function c(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"===typeof t)return t;if(d(t))return 1*t;if("string"===typeof t){var n=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|px|%)$/g,i=n.exec(t);if(!t||!i)return 0;var a=i[3];t=parseFloat(t);var o=0;return"rpx"===a?o=uni.upx2px(t):"px"===a?o=1*t:"%"===a?o=t*c(e)/100:"em"===a&&(o=t*c(e||14)),r?1*o.toFixed(2):Math.round(o)}}function l(t,e){t=t.split("."),e=e.split(".");var r=Math.max(t.length,e.length);while(t.length<r)t.push("0");while(e.length<r)e.push("0");for(var n=0;n<r;n++){var i=parseInt(t[n],10),a=parseInt(e[n],10);if(i>a)return 1;if(i<a)return-1}return 0}function f(t){var e=/data:image\/(\w+);base64,(.*)/.exec(t)||[],r=(0,a.default)(e,3);r[1],r[2];return new Promise((function(e,r){for(var n=t.split(",")[0].split(":")[1].split(";")[0],i=atob(t.split(",")[1]),a=new ArrayBuffer(i.length),o=new Uint8Array(a),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);e(URL.createObjectURL(new Blob([o],{type:n})))}))}function h(e){return new Promise((function(r,n){var i=function(){var i=new Image;i.setAttribute("crossOrigin","Anonymous"),i.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(i,0,0);var e=t.toDataURL("image/png");r(e),t.height=t.width=0},i.src=e,i.onerror=function(r){t.error("urlToBase64 error: ".concat(e),JSON.stringify(r)),n(new Error("urlToBase64 error"))}},a=function(e){var i=new FileReader;i.onload=function(t){r(t.target.result)},i.readAsDataURL(e),i.onerror=function(e){t.error("blobToBase64 error:",JSON.stringify(e)),n(new Error("blobToBase64 error"))}},s="function"===typeof FileReader;if(o.test(e)&&s){window.URL=window.URL||window.webkitURL;var u=new XMLHttpRequest;u.open("get",e,!0),u.timeout=2e3,u.responseType="blob",u.onload=function(){200==this.status?a(this.response):i()},u.onreadystatechange=function(){0===this.status&&t.error("图片跨域了，得后端处理咯")},u.send()}else/^blob/.test(e)&&s?a(e):i()}))}function v(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(){var a=(0,i.default)(regeneratorRuntime.mark((function i(a,s){var d,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(d=/^data:image\/(\w+);base64/,/^\.|^\/(?=[^\/])/,!o.test(e)||!r){i.next=6;break}return i.next=5,h(e);case 5:e=i.sent;case 6:if(!d.test(e)){i.next=16;break}if(u[e]){i.next=15;break}return c=e,i.next=11,f(e);case 11:e=i.sent,u[c]=e,i.next=16;break;case 15:e=u[e];case 16:u[e]&&u[e].errMsg&&!n?a(u[e]):uni.getImageInfo({src:e,success:function(t){t.path=t.path.replace(/^\./,window.location.origin),t.originSrc=e,u[e]=t,a(u[e])},fail:function(r){a({path:e}),t.error("getImageInfo:fail ".concat(e," failed ").concat(JSON.stringify(r)))}});case 17:case"end":return i.stop()}}),i)})));return function(t,e){return a.apply(this,arguments)}}())}}).call(this,r("5a52")["default"])},"9e46":function(t,e,r){"use strict";r.r(e);var n=r("e3b1"),i=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},aed8:function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.canvasId?r("v-uni-view",[t.use2dCanvas?r("v-uni-canvas",{style:t.size+";"+t.customStyle,attrs:{id:t.canvasId,type:"2d"}}):r("v-uni-canvas",{style:t.size+";"+t.customStyle,attrs:{"canvas-id":t.canvasId,id:t.canvasId,width:t.boardWidth*t.dpr,height:t.boardHeight*t.dpr}})],1):t._e()},a=[]},afbc:function(t,e,r){"use strict";r.r(e);var n=r("aed8"),i=r("b938");for(var a in i)"default"!==a&&function(t){r.d(e,t,(function(){return i[t]}))}(a);var o,s=r("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=u.exports},b680:function(t,e,r){"use strict";var n=r("23e7"),i=r("a691"),a=r("408a"),o=r("1148"),s=r("d039"),u=1..toFixed,d=Math.floor,c=function(t,e,r){return 0===e?r:e%2===1?c(t,e-1,r*t):c(t*t,e/2,r)},l=function(t){var e=0,r=t;while(r>=4096)e+=12,r/=4096;while(r>=2)e+=1,r/=2;return e},f=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}));n({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,r,n,s,u=a(this),f=i(t),h=[0,0,0,0,0,0],v="",p="0",g=function(t,e){var r=-1,n=e;while(++r<6)n+=t*h[r],h[r]=n%1e7,n=d(n/1e7)},b=function(t){var e=6,r=0;while(--e>=0)r+=h[e],h[e]=d(r/t),r=r%t*1e7},m=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var r=String(h[t]);e=""===e?r:e+o.call("0",7-r.length)+r}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(e=l(u*c(2,69,1))-69,r=e<0?u*c(2,-e,1):u/c(2,e,1),r*=4503599627370496,e=52-e,e>0){g(0,r),n=f;while(n>=7)g(1e7,0),n-=7;g(c(10,n,1),0),n=e-1;while(n>=23)b(1<<23),n-=23;b(1<<n),g(1,1),b(2),p=m()}else g(0,r),g(1<<-e,0),p=m()+o.call("0",f);return f>0?(s=p.length,p=v+(s<=f?"0."+o.call("0",f-s)+p:p.slice(0,s-f)+"."+p.slice(s-f))):p=v+p,p}})},b85c:function(t,e,r){"use strict";r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=i(r("06c5"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=(0,n.default)(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(u)throw o}}}}},b938:function(t,e,r){"use strict";r.r(e);var n=r("f0e0"),i=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},baa5:function(t,e,r){var n=r("23e7"),i=r("e58c");n({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},cb29:function(t,e,r){var n=r("23e7"),i=r("81d5"),a=r("44d2");n({target:"Array",proto:!0},{fill:i}),a("fill")},d2da:function(t,e,r){"use strict";var n=r("4ea4");r("4160"),r("caad"),r("d81d"),r("b64b"),r("ac1f"),r("2532"),r("466d"),r("5319"),r("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.Layout=void 0;var i=n(r("3835")),a=n(r("ade3"));r("96cf");var o=n(r("1da1")),s=n(r("d4ec")),u=n(r("bee2")),d=r("533a"),c=function(){function t(){(0,s.default)(this,t),this.layoutHeight=0,this.layoutWidth=0,this.uuid=0,this.count=0}return(0,u.default)(t,[{key:"init",value:function(t,e,r){this.ctx=t,this.root=e,this.layoutWidth=e.width||0,this.layoutHeight=e.height||0,this.uuid=0,this.isH5PathToBase64=r}},{key:"getNodeTree",value:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var r,n,i,a,o,s,u,d,c,l,f,h,v,p,g,b,m,w,x=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},n=x.length>2&&void 0!==x[2]?x[2]:0,i=x.length>3&&void 0!==x[3]?x[3]:[],a=x.length>4?x[4]:void 0,this.count++,o=Object.assign({},this.getComputedStyle(e,r,n)),t.next=8,this.getAttributes(e);case 8:if(s=t.sent,u={id:this.uuid++,parent:r,computedStyle:o,rules:e.rules,attributes:Object.assign({},s),name:(null===e||void 0===e?void 0:e.type)||"view",isRoot:!(null===e||void 0===e?void 0:e.type)&&"{}"==JSON.stringify(r)},"{}"!==JSON.stringify(r)||e.type?u.layoutBox=Object.assign({left:0,top:0},this.getLayoutBox(u,r,n,i,a)):(d=o.left,c=void 0===d?0:d,l=o.top,f=void 0===l?0:l,h=o.width,v=void 0===h?0:h,p=o.height,g=void 0===p?0:p,u.layoutBox={left:c,top:f,width:v,height:g}),!(null===e||void 0===e?void 0:e.views)){t.next=26;break}b=[],u.children=[],m=0;case 15:if(!(m<e.views.length)){t.next=25;break}return w=e.views[m],t.t0=b,t.next=20,this.getNodeTree(w,u,m,b,e);case 20:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 22:m++,t.next=15;break;case 25:u.children=b;case 26:return t.abrupt("return",u);case 27:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getComputedStyle",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},o=t.name||t.type,s="{}"!=JSON.stringify(r)||o?t.css:t;if(!s)return n;var u=["color","fontSize","lineHeight","verticalAlign","fontWeight","textAlign"];r.computedStyle&&u.forEach((function(t){(s[t]||r.computedStyle[t])&&(s[t]=s[t]||r.computedStyle[t])}));for(var c=function(){var t=f[l],u=s[t];if("views"==t)return"continue";if(/^(box)?shadow$/i.test(t)){var c=u.split(" ").map((function(t){return/^\d/.test(t)?(0,d.toPx)(t):t}));return n.boxShadow=c,"continue"}if(/^border/i.test(t)&&!/radius$/i.test(t)){var h,v=t.match(/^border([BTRLa-z]+)?/)[0],p=t.match(/[W|S|C][a-z]+/),g=u.replace(/([\(,])\s+|\s+([\),])/g,"$1$2").split(" ").map((function(t){return/^\d/.test(t)?(0,d.toPx)(t,"",!0):t}));return n[v]=(h={},(0,a.default)(h,v+"Width",((0,d.isNumber)(g[0])?g[0]:0)||1),(0,a.default)(h,v+"Style",g[1]||"solid"),(0,a.default)(h,v+"Color",g[2]||"black"),h),1==g.length&&p&&(n[v][v+p[0]]=g[0]),"continue"}if(/^background(color)?$/i.test(t))return n["backgroundColor"]=u,"continue";if(/padding|margin|radius/i.test(t)){var b=/radius$/i.test(t),m=b?"borderRadius":t.match(/[a-z]+/)[0],w=[0,0,0,0].map((function(t,e){return b?["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"][e]:[m+"Top",m+"Right",m+"Bottom",m+"Left"][e]}));if("padding"===t||"margin"===t||/^(border)?radius$/i.test(t)){var x,y=(null===u||void 0===u?void 0:u.split(" ").map((function(t){return/^\d/.test(t)&&(0,d.toPx)(t,s["width"])}),[]))||[0],k=b?"borderRadius":t,P=(0,i.default)(y,4),S=P[0],R=P[1],T=P[2],I=P[3];n[k]=(x={},(0,a.default)(x,w[0],S),(0,a.default)(x,w[1],(0,d.isNumber)(R)?R:S),(0,a.default)(x,w[2],(0,d.isNumber)(T)?T:S),(0,a.default)(x,w[3],(0,d.isNumber)(I)?I:R||S),x)}else{var M;if("object"===typeof n[m])n[m][t]=(0,d.toPx)(u,s["width"]);else n[m]=(M={},(0,a.default)(M,w[0],n[m]||0),(0,a.default)(M,w[1],n[m]||0),(0,a.default)(M,w[2],n[m]||0),(0,a.default)(M,w[3],n[m]||0),M),n[m][t]=(0,d.toPx)(u,s["width"])}return"continue"}if(/^(width|height)$/i.test(t))return/%$/.test(u)?n[t]=(0,d.toPx)(u,r.layoutBox[t]):n[t]=/px|rpx$/.test(u)?(0,d.toPx)(u):u,"continue";if(/^transform$/i.test(t))return n[t]={},u.replace(/([a-zA-Z]+)\(([0-9,-\.%rpxdeg\s]+)\)/g,(function(e,r,i){var a=i.split(",").map((function(t){return t.replace(/(^\s*)|(\s*$)/g,"")})),o=function(t,e){return t.includes("deg")?1*t:e&&!/%$/.test(e)?(0,d.toPx)(t,e):t};r.includes("matrix")?n[t][r]=a.map((function(t){return 1*t})):r.includes("rotate")?n[t][r]=1*i.match(/^-?\d+(\.\d+)?/)[0]:/[X, Y]/.test(r)?n[t][r]=/[X]/.test(r)?o(a[0],s["width"]):o(a[0],s["height"]):(n[t][r+"X"]=o(a[0],s["width"]),n[t][r+"Y"]=o(a[1]||a[0],s["height"]))})),"continue";if(/^transformOrigin/i.test(t))return n[t]=u.replace(/^([%\.\da-zA-Z]+)$/,"$1 $1"),"continue";if(/%/.test(u)){var O=r.layoutBox,B=O.width,C=O.height,j=(O.left,O.top,e.root),L=j.width,N=j.height;n.position;n[t]="width"==t?(0,d.toPx)(u,B||L):"height"==t?(0,d.toPx)(u,C||N):"left"==t||"top"==t?u:(0,d.toPx)(u,s["width"])}else n[t]=/^[\d\.]+(px|rpx)?$/.test(u)?(0,d.toPx)(u):/em$/.test(u)&&"text"==o?(0,d.toPx)(u,s["fontSize"]):u},l=0,f=Object.keys(s);l<f.length;l++)c();return/image/.test(t.name||t.type)&&!n.mode&&(n.mode=t.mode||"scaleToFill",s.width&&"auto"!=s.width||s.height&&"auto"!=s.width||(n.mode="")),n}},{key:"getLayoutBox",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o={},s=t||{},u=s.name,c=s.computedStyle,l=(s.layoutBox,s.attributes);s.isRoot;if(!u)return o;var f=this.ctx,h=n.layoutBox,v=void 0===h?this.root:h,p=n.computedStyle,g=c.verticalAlign,b=c.left,m=c.top,w=c.width,x=c.height,y=c.fontSize,k=void 0===y?14:y,P=c.lineHeight,S=void 0===P?"1.4em":P,R=c.maxLines,T=c.fontWeight,I=c.fontFamily,M=c.textStyle,O=c.position,B=c.display,C=c.padding,j=void 0===C?{}:C,L=c.margin,N=void 0===L?{}:L,F=j.paddingTop,_=void 0===F?0:F,$=j.paddingRight,A=void 0===$?0:$,W=j.paddingBottom,D=void 0===W?0:W,H=j.paddingLeft,z=void 0===H?0:H,E=N.marginTop,U=void 0===E?0:E,J=N.marginRight,G=void 0===J?0:J,X=N.marginBottom,q=void 0===X?0:X,Y=N.marginLeft,Q=void 0===Y?0:Y,V=a[i-1]||{},Z=V.layoutBox,K=V.computedStyle,tt=V.name,et=a[i+1]||{},rt=et.layoutBox,nt=(et.computedStyle,et.name,(null===K||void 0===K||null===(e=K.margin)||void 0===e?void 0:e.marginBottom)||0),it=(null===K||void 0===K||null===(r=K.margin)||void 0===r?void 0:r.marginRight)||0;if(/%$/.test(b)&&(b=(0,d.toPx)(b,v.width)),/%$/.test(m)&&(m=(0,d.toPx)(m,v.height)),"relative"==O&&(b+=v.left,m+=v.top),"text"===u){var at=l.text||"";S=(0,d.toPx)(S,k),f.save(),f.setFonts({fontFamily:I,fontSize:k,fontWeight:T,textStyle:M});var ot=0==i,st="inlineBlock"===B,ut="block"===B||"block"===(null===K||void 0===K?void 0:K.display),dt=ot&&!rt||!(null===n||void 0===n?void 0:n.id),ct=ot||ut?0:Z.offsetRight||0,lt=at.split("\n"),ft=1,ht="",vt=c.textIndent||0;dt||st?(ht=at,ft=Math.max(lt.length,Math.ceil(f.measureText(at,k).width/((w||v.width)-f.measureText("!",k).width/2)))):lt.map((function(t,e){ft+=e;for(var r=t.split(""),n=0;n<r.length;n++){var i=r[n],a=ht+i,o=f.measureText(a,k).width;1==ft&&(o=o+(ut?0:ct)+vt),o>(w||v.width)?(ft++,ht=i):ht=a}})),st||(o.offsetLeft=((0,d.isNumber)(b)||ut||dt?vt:ct)+z+Q),o.offsetTop=_;var pt=f.measureText(ht,k).width,gt=(ft>1?v.width:pt+((null===o||void 0===o?void 0:o.offsetLeft)||0))+A;st||(o.offsetRight=(b||0)+o.offsetLeft+(w||(ut?v.width:pt))+A+G);var bt=Z?Z.left+Z.width:0,mt=function(){return st?(bt+gt>v.width||ot?v.left:bt+it)+Q:b||v.left},wt=function(){return st?gt+z+A:w||(!dt||ut?v.width:gt>v.width-o.left||ft>1?v.width-o.left:gt)},xt=function(){return x||(ft>1?(R?Math.min(R,ft):ft)*S+_+D:S+_+D)},yt=function(){var t=m;return t||(t=ot?v.top:1==ft&&gt<v.width&&"text"===tt&&!ut&&!st||Z.width<v.width&&!(st&&bt+gt>v.width)?Z.top:Z.top+Z.height-((null===n||void 0===n?void 0:n.id)&&((null===K||void 0===K?void 0:K.lineHeight)||0))),"bottom"===g&&(t=v.top+(v.height-o.height||0)),"middle"===g&&(t=v.top+(v.height?(v.height-o.height||0)/2:0)),t+U+(ut&&(null===K||void 0===K?void 0:K.lineHeight)||0)+(bt+gt>v.width?nt:0)};o.left=mt(),o.width=wt(),o.height=xt(),o.top=yt(),p&&!p.height&&(v.height=o.top-v.top+o.height),f.restore()}else if(["view","qrcode"].includes(u))o.left=(b||v.left)+Q-G,o.width=(w||(null===v||void 0===v?void 0:v.width))-z-A,o.height=x||0,(0,d.isNumber)(m)?o.top=m+U:o.top=(Z&&Z.top+Z.height||v.top)+U+nt;else if("image"===u){var kt=l.width,Pt=l.height,St=Z&&Z.left+Z.width;if((0,d.isNumber)(b)?o.left=b+Q-G:o.left=(Z&&(St<v.width?St:v.left)||v.left)+Q-G,(0,d.isNumber)(w)?o.width=w:o.width=Math.round((0,d.isNumber)(x)?kt*x/Pt:null===v||void 0===v?void 0:v.width),(0,d.isNumber)(x))o.height=x;else{var Rt=Math.round(o.width*Pt/kt);o.height=Math.min(Rt,null===v||void 0===v?void 0:v.height)}(0,d.isNumber)(m)?o.top=m+U:o.top=(Z&&(St<v.width?St:Z.top+Z.height)||v.top)+U+nt}return o.top+o.height+q>this.layoutHeight&&(this.layoutHeight=o.top+o.height+q),o}},{key:"getAttributes",value:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var r,n,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={},!(null===e||void 0===e?void 0:e.url)&&!(null===e||void 0===e?void 0:e.src)){t.next=16;break}return r.src=e.url||(null===e||void 0===e?void 0:e.src),t.next=5,(0,d.getImageInfo)(r.src,this.isH5PathToBase64);case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0={};case 8:n=t.t0,i=n.width,a=void 0===i?0:i,o=n.height,s=void 0===o?0:o,u=n.path,c=n.originSrc,r=Object.assign({},r,{width:a,height:s,src:u,originSrc:c});case 16:return(null===e||void 0===e?void 0:e.text)&&(r.text=e.text),t.abrupt("return",r);case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"calcNode",value:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getNodeTree(e);case 2:return r=t.sent,r.count=this.count,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e.Layout=c},d4fa:function(t,e,r){"use strict";r.r(e);var n=r("309a"),i=r("9e46");for(var a in i)"default"!==a&&function(t){r.d(e,t,(function(){return i[t]}))}(a);r("3da8");var o,s=r("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"4d2ecf84",null,!1,n["a"],o);e["default"]=u.exports},da57:function(t,e,r){(function(e){r("fb6a"),function(){var r,n,i,a,o,s,u=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],d=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],c=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],l=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],f=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],h=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],v=[],p=[],g=[],b=[],m=[],w=2;function x(t,e){var r;t>e&&(r=t,t=e,e=r),r=e,r*=e,r+=e,r>>=1,r+=t,b[r]=1}function y(t,e){var r;for(g[t+n*e]=1,r=-2;r<2;r++)g[t+r+n*(e-2)]=1,g[t-2+n*(e+r+1)]=1,g[t+2+n*(e+r)]=1,g[t+r+1+n*(e+2)]=1;for(r=0;r<2;r++)x(t-1,e+r),x(t+1,e-r),x(t-r,e-1),x(t+r,e+1)}function k(t){while(t>=255)t-=255,t=(t>>8)+(255&t);return t}var P=[];function S(t,e,r,n){var i,a,o;for(i=0;i<n;i++)v[r+i]=0;for(i=0;i<e;i++){if(o=f[v[t+i]^v[r]],255!=o)for(a=1;a<n;a++)v[r+a-1]=v[r+a]^h[k(o+P[n-a])];else for(a=r;a<r+n;a++)v[a]=v[a+1];v[r+n-1]=255==o?0:h[k(o+P[0])]}}function R(t,e){var r;return t>e&&(r=t,t=e,e=r),r=e,r+=e*e,r>>=1,r+=t,b[r]}function T(t){var e,r,i,a;switch(t){case 0:for(r=0;r<n;r++)for(e=0;e<n;e++)e+r&1||R(e,r)||(g[e+r*n]^=1);break;case 1:for(r=0;r<n;r++)for(e=0;e<n;e++)1&r||R(e,r)||(g[e+r*n]^=1);break;case 2:for(r=0;r<n;r++)for(i=0,e=0;e<n;e++,i++)3==i&&(i=0),i||R(e,r)||(g[e+r*n]^=1);break;case 3:for(a=0,r=0;r<n;r++,a++)for(3==a&&(a=0),i=a,e=0;e<n;e++,i++)3==i&&(i=0),i||R(e,r)||(g[e+r*n]^=1);break;case 4:for(r=0;r<n;r++)for(i=0,a=r>>1&1,e=0;e<n;e++,i++)3==i&&(i=0,a=!a),a||R(e,r)||(g[e+r*n]^=1);break;case 5:for(a=0,r=0;r<n;r++,a++)for(3==a&&(a=0),i=0,e=0;e<n;e++,i++)3==i&&(i=0),(e&r&1)+!(!i|!a)||R(e,r)||(g[e+r*n]^=1);break;case 6:for(a=0,r=0;r<n;r++,a++)for(3==a&&(a=0),i=0,e=0;e<n;e++,i++)3==i&&(i=0),(e&r&1)+(i&&i==a)&1||R(e,r)||(g[e+r*n]^=1);break;case 7:for(a=0,r=0;r<n;r++,a++)for(3==a&&(a=0),i=0,e=0;e<n;e++,i++)3==i&&(i=0),(i&&i==a)+(e+r&1)&1||R(e,r)||(g[e+r*n]^=1);break}}var I=3,M=3,O=40,B=10;function C(t){var e,r=0;for(e=0;e<=t;e++)m[e]>=5&&(r+=I+m[e]-5);for(e=3;e<t-1;e+=2)m[e-2]==m[e+2]&&m[e+2]==m[e-1]&&m[e-1]==m[e+1]&&3*m[e-1]==m[e]&&(0==m[e-3]||e+3>t||3*m[e-3]>=4*m[e]||3*m[e+3]>=4*m[e])&&(r+=O);return r}function j(){var t,e,r,i,a,o=0,s=0;for(e=0;e<n-1;e++)for(t=0;t<n-1;t++)(g[t+n*e]&&g[t+1+n*e]&&g[t+n*(e+1)]&&g[t+1+n*(e+1)]||!(g[t+n*e]||g[t+1+n*e]||g[t+n*(e+1)]||g[t+1+n*(e+1)]))&&(o+=M);for(e=0;e<n;e++){for(m[0]=0,r=i=t=0;t<n;t++)(a=g[t+n*e])==i?m[r]++:m[++r]=1,i=a,s+=i?1:-1;o+=C(r)}s<0&&(s=-s);var u=s,d=0;u+=u<<2,u<<=1;while(u>n*n)u-=n*n,d++;for(o+=d*B,t=0;t<n;t++){for(m[0]=0,r=i=e=0;e<n;e++)(a=g[t+n*e])==i?m[r]++:m[++r]=1,i=a;o+=C(r)}return o}function L(t){var e,m,I,M,O,B,C,L;M=t.length,r=0;do{if(r++,I=4*(w-1)+16*(r-1),i=l[I++],a=l[I++],o=l[I++],s=l[I],I=o*(i+a)+a-3+(r<=9),M<=I)break}while(r<40);for(n=17+4*r,O=o+(o+s)*(i+a)+a,M=0;M<O;M++)p[M]=0;for(v=t.slice(0),M=0;M<n*n;M++)g[M]=0;for(M=0;M<(n*(n+1)+1)/2;M++)b[M]=0;for(M=0;M<3;M++){for(I=0,m=0,1==M&&(I=n-7),2==M&&(m=n-7),g[m+3+n*(I+3)]=1,e=0;e<6;e++)g[m+e+n*I]=1,g[m+n*(I+e+1)]=1,g[m+6+n*(I+e)]=1,g[m+e+1+n*(I+6)]=1;for(e=1;e<5;e++)x(m+e,I+1),x(m+1,I+e+1),x(m+5,I+e),x(m+e+1,I+5);for(e=2;e<4;e++)g[m+e+n*(I+2)]=1,g[m+2+n*(I+e+1)]=1,g[m+4+n*(I+e)]=1,g[m+e+1+n*(I+4)]=1}if(r>1)for(M=u[r],m=n-7;;){e=n-7;while(e>M-3){if(y(e,m),e<M)break;e-=M}if(m<=M+9)break;m-=M,y(6,m),y(m,6)}for(g[8+n*(n-8)]=1,m=0;m<7;m++)x(7,m),x(n-8,m),x(7,m+n-7);for(e=0;e<8;e++)x(e,7),x(e+n-8,7),x(e,n-8);for(e=0;e<9;e++)x(e,8);for(e=0;e<8;e++)x(e+n-8,8),x(8,e);for(m=0;m<7;m++)x(8,m+n-7);for(e=0;e<n-14;e++)1&e?(x(8+e,6),x(6,8+e)):(g[8+e+6*n]=1,g[6+n*(8+e)]=1);if(r>6)for(M=d[r-7],I=17,e=0;e<6;e++)for(m=0;m<3;m++,I--)1&(I>11?r>>I-12:M>>I)?(g[5-e+n*(2-m+n-11)]=1,g[2-m+n-11+n*(5-e)]=1):(x(5-e,2-m+n-11),x(2-m+n-11,5-e));for(m=0;m<n;m++)for(e=0;e<=m;e++)g[e+n*m]&&x(e,m);for(O=v.length,B=0;B<O;B++)p[B]=v.charCodeAt(B);if(v=p.slice(0),e=o*(i+a)+a,O>=e-2&&(O=e-2,r>9&&O--),B=O,r>9){v[B+2]=0,v[B+3]=0;while(B--)M=v[B],v[B+3]|=255&M<<4,v[B+2]=M>>4;v[2]|=255&O<<4,v[1]=O>>4,v[0]=64|O>>12}else{v[B+1]=0,v[B+2]=0;while(B--)M=v[B],v[B+2]|=255&M<<4,v[B+1]=M>>4;v[1]|=255&O<<4,v[0]=64|O>>4}B=O+3-(r<10);while(B<e)v[B++]=236,v[B++]=17;for(P[0]=1,B=0;B<s;B++){for(P[B+1]=1,C=B;C>0;C--)P[C]=P[C]?P[C-1]^h[k(f[P[C]]+B)]:P[C-1];P[0]=h[k(f[P[0]]+B)]}for(B=0;B<=s;B++)P[B]=f[P[B]];for(I=e,m=0,B=0;B<i;B++)S(m,o,I,s),m+=o,I+=s;for(B=0;B<a;B++)S(m,o+1,I,s),m+=o+1,I+=s;for(m=0,B=0;B<o;B++){for(C=0;C<i;C++)p[m++]=v[B+C*o];for(C=0;C<a;C++)p[m++]=v[i*o+B+C*(o+1)]}for(C=0;C<a;C++)p[m++]=v[i*o+B+C*(o+1)];for(B=0;B<s;B++)for(C=0;C<i+a;C++)p[m++]=v[e+B+C*s];for(v=p,e=m=n-1,I=O=1,L=(o+s)*(i+a)+a,B=0;B<L;B++)for(M=v[B],C=0;C<8;C++,M<<=1){128&M&&(g[e+n*m]=1);do{O?e--:(e++,I?0!=m?m--:(e-=2,I=!I,6==e&&(e--,m=9)):m!=n-1?m++:(e-=2,I=!I,6==e&&(e--,m-=8))),O=!O}while(R(e,m))}for(v=g.slice(0),M=0,m=3e4,I=0;I<8;I++){if(T(I),e=j(),e<m&&(m=e,M=I),7==M)break;g=v.slice(0)}for(M!=I&&T(M),m=c[M+(w-1<<3)],I=0;I<8;I++,m>>=1)1&m&&(g[n-1-I+8*n]=1,I<6?g[8+n*I]=1:g[8+n*(I+1)]=1);for(I=0;I<7;I++,m>>=1)1&m&&(g[8+n*(n-7+I)]=1,I?g[6-I+8*n]=1:g[7+8*n]=1);return g}var N=null,F={get ecclevel(){return w},set ecclevel(t){w=t},get size(){return _size},set size(t){_size=t},get canvas(){return N},set canvas(t){N=t},getFrame:function(t){return L(t)},utf16to8:function(t){var e,r,n,i;for(e="",n=t.length,r=0;r<n;r++)i=t.charCodeAt(r),i>=1&&i<=127?e+=t.charAt(r):i>2047?(e+=String.fromCharCode(224|i>>12&15),e+=String.fromCharCode(128|i>>6&63),e+=String.fromCharCode(128|i>>0&63)):(e+=String.fromCharCode(192|i>>6&31),e+=String.fromCharCode(128|i>>0&63));return e},draw:function(t,r,i,a,o){var s=r.ctx,u=i.width,d=i.height,c=a.borderRadius,l=void 0===c?0:c,f=a.backgroundColor,h=a.color,v=void 0===h?"#000000":h,p=a.border,g=p||{},b=g.borderWidth,m=this;if(w=o||w,s){s.save(),r.setOpacity(a);var x=r.setTransform(i,a),y=x.x,k=x.y;b&&(u-=b,d-=b,y+=b/2,k+=b/2);var P=Math.min(u,d);t=m.utf16to8(t);var S=m.getFrame(t),R=P/n;f&&(r.setBackground(f,u,d),r.roundRect(y,k,u,d,l,!0,!1)),s.setFillStyle(v);for(var T=0;T<n;T++)for(var I=0;I<n;I++)S[I*n+T]&&s.fillRect(y+R*T,k+R*I,R,R);s.restore(),r.setBorder(i,a)}else e.warn("No canvas provided to draw QR code in!")}};t.exports={api:F}}()}).call(this,r("5a52")["default"])},de5c:function(t,e,r){var n=r("3d01");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=r("4f06").default;i("07527813",n,!0,{sourceMap:!1,shadowMode:!1})},e3b1:function(t,e,r){"use strict";var n=r("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("96cf");var i=n(r("1da1")),a=n(r("afbc")),o=r("5f34"),s=r("48bc"),u={components:{lPainter:a.default},data:function(){return{type:"",path:"",id:"",name:""}},computed:{base:function(){var t=uni.getStorageSync("userID");return{width:"300px",height:"450px",backgroundColor:"#f8f8f8",views:[{type:"image",src:this.path,css:{left:"0rpx",top:"0rpx",width:"300px",height:"450px"}},{type:"text",text:"ID: "+t,css:{left:"110px",top:"420px",color:"#fff",borderRadius:"10px",paddingTop:"4px",paddingBottom:"4px",fontSize:"12px",width:"80px",textAlign:"center"}},{type:"qrcode",text:"mini"==this.type?o.shareFriendUrl+"?s_id="+t:o.promoteUrl+"?id="+this.id+"&pid="+t,css:{left:"110px",top:"340px",background:"#fff",width:"80px",height:"80px"}}]}}},onLoad:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var n,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,s.getUserInfo)();case 2:n=r.sent,uni.setStorageSync("userID",n.data.id),t.type&&(e.type=t.type),i=t.title,t.id&&(e.id=t.id),t.name&&(e.name=t.name),t.link&&(e.link=t.link),a="mini"==t.type?t.chatImg:t.poster,e.path=a,setTimeout((function(){uni.setNavigationBarTitle({title:i})}),100);case 12:case"end":return r.stop()}}),r)})))()},methods:{getImg:function(t){uni.setStorageSync("imgUrl",t)},copyLink:function(){var t=uni.getStorageSync("userID");uni.setClipboardData({data:"mini"==this.type?o.shareFriendUrl+"?s_id="+t:o.promoteUrl+"?id="+this.id+"&pid="+t,success:function(t){uni.showToast({title:"复制推广链接成功",icon:"none",duration:1e3,position:"bottom"})},fail:function(){uni.showToast({title:"复制失败，请重试",icon:"none",duration:1e3,position:"bottom"})}})},saveImg:function(){return(0,i.default)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=uni.getStorageSync("imgUrl"),r=document.createElement("a"),r.download="download_"+(new Date).getTime(),r.href=e,document.body.appendChild(r),r.click(),r.remove();case 7:case"end":return t.stop()}}),t)})))()}}};e.default=u},f0e0:function(t,e,r){"use strict";var n=r("4ea4");r("99af"),r("a9e3"),r("d3b7"),r("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("96cf");var i=n(r("1da1")),a=r("533a"),o=r("2739"),s=r("d2da"),u=r("43d7"),d={name:"l-painter",props:{board:Object,pathType:{type:String},fileType:{type:String,default:"png"},quality:{type:Number,default:1},width:[Number,String],height:[Number,String],pixelRatio:Number,customStyle:String,isRenderImage:Boolean,isH5PathToBase64:Boolean,sleep:{type:Number,default:1e3/60},beforeDelay:{type:Number,default:1e3/60},afterDelay:Number},data:function(){return{use2dCanvas:!1,draw:null,ctx:null,canvasHeight:0,canvasWidth:0,layout:new s.Layout,isDrawIng:!1,isPC:!1}},computed:{canvasId:function(){return"l-painter".concat(this._uid)},size:function(){return"width:".concat(this.boardWidth,"px; height: ").concat(this.boardHeight,"px;")},dpr:function(){return this.pixelRatio||uni.getSystemInfoSync().pixelRatio},boardWidth:function(){var t=this.board||{},e=t.width;return(0,a.toPx)(this.width||e)},boardHeight:function(){var t=this.board||{},e=t.height,r=this.height,n=this.canvasHeight;return/^auto$/.test(r||e)?n||1:(0,a.toPx)(r||e)}},watch:{size:function(){}},mounted:function(){var t=this;this.$watch("board",function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("{}"!==JSON.stringify(r)&&r){e.next=2;break}return e.abrupt("return");case 2:if(!t.beforeDelay){e.next=5;break}return e.next=5,(0,a.sleep)(t.beforeDelay);case 5:t.render();case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{deep:!0,immediate:!0})},methods:{update:function(t,e){var r=this;return(0,i.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.draw=null,r.isDrawIng=!1,n.next=4,new Promise((function(t){return r.$nextTick(t)}));case 4:return n.next=6,(0,a.sleep)(200);case 6:return n.abrupt("return",r.render(t,e));case 7:case"end":return n.stop()}}),n)})))()},render:function(){var t=arguments,e=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var n,s,u,d,c,l,f,h,v,p,g,b,m,w;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.length>0&&void 0!==t[0]?t[0]:{},s=t.length>1&&void 0!==t[1]&&t[1],!e.isDrawIng){r.next=4;break}return r.abrupt("return",e.update(n,s));case 4:return e.isDrawIng=!0,u="{}"!=JSON.stringify(n),r.next=8,e.getContext();case 8:if(d=r.sent,c=e.use2dCanvas,l=e.boardWidth,f=e.boardHeight,h=e.board,v=e.canvas,p=e.isH5PathToBase64,g=e.sleep,b=e.afterDelay,!c||v){r.next=12;break}return r.abrupt("return",Promise.reject(new Error("render: fail canvas has not been created")));case 12:if(e.boundary={top:0,left:0,width:l,height:f},s||d.clearRect(0,0,l,f),e.draw&&!u||(e.draw=new o.Draw(d,v,c,p,g),e.draw.listen("progressChange",(function(t){e.$emit("progress",t)}))),e.layout.init(d,e.boundary,p),!(u||h&&"{}"!=JSON.stringify(h))){r.next=20;break}return r.next=19,e.layout.calcNode(u?n:Object.assign({},h,{height:h.type||"auto"!=h.height?h.height:f}));case 19:e.node=r.sent;case 20:if(m=e.layout.layoutHeight,!/auto/.test(e.height||h.height)||e.canvasHeight){r.next=24;break}return e.canvasHeight=m,r.abrupt("return",e.update(n,s));case 24:if(!e.node){r.next=27;break}return r.next=27,null===(w=e.draw)||void 0===w?void 0:w.drawNode(e.node);case 27:return r.next=29,new Promise((function(t){return e.$nextTick(t)}));case 29:if(c||s){r.next=32;break}return r.next=32,e.canvasDraw(d);case 32:if(!b){r.next=35;break}return r.next=35,(0,a.sleep)(b);case 35:return e.$emit("done"),e.isRenderImage&&!s&&e.isDrawIng&&e.canvasToTempFilePath().then(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("base64"!=e.pathType){t.next=11;break}if(!/^data:image\/(\w+);base64/.test(r.tempFilePath)){t.next=5;break}e.$emit("success",r.tempFilePath),t.next=9;break;case 5:return t.next=7,(0,a.pathToBase64)(r.tempFilePath);case 7:n=t.sent,e.$emit("success",n);case 9:t.next=21;break;case 11:if("url"!=e.pathType){t.next=20;break}if(i="",!/^data:image\/(\w+);base64/.test(r.tempFilePath)){t.next=17;break}return t.next=16,(0,a.base64ToPath)(r.tempFilePath);case 16:i=t.sent;case 17:e.$emit("success",i),t.next=21;break;case 20:e.$emit("success",r.tempFilePath);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$emit("fail",new Error(JSON.stringify(t)))})),e.isDrawIng=!1,r.abrupt("return",Promise.resolve({ctx:d,draw:e.draw,node:e.node}));case 39:case"end":return r.stop()}}),r)})))()},custom:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var n,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.render({},!0);case 2:return n=r.sent,i=n.ctx,a=n.draw,i.save(),r.next=8,t(i,a);case 8:return i.restore(),r.abrupt("return",Promise.resolve(!0));case 10:case"end":return r.stop()}}),r)})))()},single:function(){var t=arguments,e=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,e.render(n,!0);case 3:return i=r.sent,r.abrupt("return",Promise.resolve(i));case 5:case"end":return r.stop()}}),r)})))()},canvasDraw:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.ctx;return new Promise((function(r){e.draw(t,r)}))},getContext:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var r,n,i,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.ctx||!t.inited){e.next=2;break}return e.abrupt("return",Promise.resolve(t.ctx));case 2:return r=t.type,t.use2dCanvas,n=t.dpr,i=t.boardWidth,a=t.boardHeight,o=function(){return new Promise((function(e){uni.createSelectorQuery().in(t).select("#".concat(t.canvasId)).boundingClientRect().exec((function(r){if(r){var i=uni.createCanvasContext(t.canvasId,t);t.inited||(t.inited=!0,t.use2dCanvas=!1,t.canvas=r),t.isPC&&i.scale(1/n,1/n),t.ctx=(0,u.expand)(i),e(t.ctx)}}))}))},e.abrupt("return",o());case 7:return e.abrupt("return",new Promise((function(e){uni.createSelectorQuery().in(t).select("#".concat(t.canvasId)).node().exec((function(o){var s=o[0].node;s||(t.use2dCanvas=!1,e(t.getContext()));var d=s.getContext(r);t.inited||(t.inited=!0,s.width=i*n,s.height=a*n,t.use2dCanvas=!0,t.canvas=s,d.scale(n,n)),t.ctx=u.adaptor?(0,u.adaptor)(d):(0,u.expand)(d),e(t.ctx)}))})));case 8:case"end":return e.stop()}}),e)})))()},canvasToTempFilePath:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.use2dCanvas,n=this.canvasId,i=this.dpr,a=this.fileType,o=this.quality;return new Promise((function(s,u){var d=t.boundary||t,c=d.top,l=void 0===c?0:c,f=d.left,h=void 0===f?0:f,v=d.width,p=d.height,g=v*i,b=p*i,m=Object.assign({x:h,y:l,width:v,height:p,destWidth:g,destHeight:b,canvasId:n,fileType:a,quality:o,success:s,fail:u},e);r&&(delete m.canvasId,m.canvas=t.canvas),uni.canvasToTempFilePath(m,t)}))}}};e.default=d}}]);